<!doctype html>
<html>
  <head>
    <title>Artists' Saved Songs</title>
    <link rel="icon" href="./assets/icons/Spotify_Icon_RGB_Green.png">
    <link href="./styles/css/styles.css" rel="stylesheet" type="text/css"/>
  </head>

  <body>
    <div class="myContainer">
      <div class="navBar">
        <h1><a href="/" class="titleLink">Artists Saved Songs Playlists</a></h1>
        <img src="./assets/logos/Spotify_Logo_RGB_White.png" id="navBarLogo"/>
      </div>
      <div id="content">
        <div id="login">
          <a href="" id="login-btn" class="btn btn-success btn-lg">Log in with Spotify</a>
        </div>
      </div>
    </div>
    <script>
      const queryParams = getHashParams();

      // PLEASE CHANGE TO fetches onclick
      if(window.location.href.includes("http://localhost:5000/")) {
        serverBaseUrl = "http://localhost:5001/artists-saved-songs-playlists/us-east1/";
        document.getElementById("login-btn").href = `${serverBaseUrl}login`;
      } else if(window.location.href.includes("http://localhost:8888/")) {
        serverBaseUrl = "http://localhost:8888/";
        document.getElementById("login-btn").href = `${serverBaseUrl}login`;
      } else {
        serverBaseUrl = "https://api-qdsvmmfcoq-ue.a.run.app/";
        document.getElementById("login-btn").href = `${serverBaseUrl}login`;
      }

      /**
       * Obtains parameters from the hash of the URL
       * @return Object
       */
      function getHashParams() {
        var hashParams = {};
        var e, r = /([^&;=]+)=?([^&;]*)/g,
            q = window.location.hash.substring(1);
        while ( e = r.exec(q)) {
            hashParams[e[1]] = decodeURIComponent(e[2]);
        }
        return hashParams;
      }
    </script>
  </body>
</html>

