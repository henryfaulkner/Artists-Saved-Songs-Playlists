<!doctype html>
<html>
  <head>
    <title>Artists' Saved Songs</title>
    <link rel="icon" href="./assets/icons/Spotify_Icon_RGB_Green.png">
    <link href="./styles/css/styles.css" rel="stylesheet" type="text/css"/>
  </head>

  <body>
    <div class="myContainer">
      <div class="navBar">
        <h1><a href="/" class="titleLink">Artists Saved Songs Playlists</a></h1>
        <img src="./assets/logos/Spotify_Logo_RGB_White.png" id="navBarLogo"/>
      </div>
      <div id="content">
        <div id="login">
          <a href="" id="login-btn" class="btn btn-success btn-lg">Log in with Spotify</a>
          <p style="width: 55%;">
            Hey. The Developer here. I missed the Spotify functionality where they 
            would make a playlist in your library with all your liked songs from each 
            Artist you have liked songs by. If you like to use this feature as well,
            email me the email you use for Spotify @ <a style="margin: 0;" href="mailto:hfaulkner27@gmail.com">hfaulkner27@gmail.com</a>.
            I'll get you add to our list ASAP.  
          </p>
        </div>
      </div>

      <footer class="px-4 flex flex-col items-center gap-4 py-5 text-center">
        <p
          class="underline underline-offset-4 max-w-[50ch] mb-10"
          title="This site uses Google Analytics (which adds cookies) to measure the number of users and the countries they are from. I don’t store any of your private identifiable information."
          >This site uses Google Analytics (which adds cookies) to measure the number
          of unique visitors.</p
        >
        <p>© 2022 Henry Faulkner. All rights reserved.</p>
      </footer>
    </div>
    <script>
      const queryParams = getHashParams();

      // PLEASE CHANGE TO fetches onclick
      if(window.location.href.includes("http://localhost:5000/")) {
        serverBaseUrl = "http://localhost:5001/artists-saved-songs-playlists/us-east1/";
        document.getElementById("login-btn").href = `${serverBaseUrl}login`;
      } else if(window.location.href.includes("http://localhost:8888/")) {
        serverBaseUrl = "http://localhost:8888/";
        document.getElementById("login-btn").href = `${serverBaseUrl}login`;
      } else {
        serverBaseUrl = "https://api-qdsvmmfcoq-ue.a.run.app/";
        document.getElementById("login-btn").href = `${serverBaseUrl}login`;
      }

      /**
       * Obtains parameters from the hash of the URL
       * @return Object
       */
      function getHashParams() {
        var hashParams = {};
        var e, r = /([^&;=]+)=?([^&;]*)/g,
            q = window.location.hash.substring(1);
        while ( e = r.exec(q)) {
            hashParams[e[1]] = decodeURIComponent(e[2]);
        }
        return hashParams;
      }
    </script>
  </body>
</html>

