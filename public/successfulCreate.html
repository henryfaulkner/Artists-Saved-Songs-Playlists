<!doctype html>
<html>
  <head>
    <title>Artists' Saved Songs</title>
    <link rel="icon" href="./assets/icons/Spotify_Icon_RGB_Green.png">
    <link href="./styles/css/styles.css" rel="stylesheet" type="text/css"/>
  </head>

  <body>
    <div class="container myContainer">
      <div class="navBar">
        <h1><a href="/" class="titleLink">Artists Saved Songs Playlists</a></h1>
        <img src="./assets/logos/Spotify_Logo_RGB_White.png" id="navBarLogo"/>
      </div>
      <div id="content">
        <div id="created">
          <h1>The playlist creation process has finished! Please refer to your 
              Spotify account to see your new playlists.</h1>
          <a href="" id="signup-btn" class="btn btn-success btn-lg">Subscribe!</a>
          <a href="" id="return-btn" class="btn btn-success btn-lg">Return to the main page</a>
        </div>
      </div>
    </div>

    <script>
      const queryParams = getHashParams();
      // PLEASE CHANGE TO fetches onclick
      document.getElementById("signup-btn").href = `/signup.html#access_token=${queryParams["access_token"]}&refresh_token=${queryParams["refresh_token"]}&spotify_user_id=${queryParams["spotify_user_id"]}`;
      document.getElementById("return-btn").href = `/main.html#access_token=${queryParams["access_token"]}&refresh_token=${queryParams["refresh_token"]}&spotify_user_id=${queryParams["spotify_user_id"]}`;

      /**
       * Obtains parameters from the hash of the URL
       * @return Object
       */
      function getHashParams() {
        var hashParams = {};
        var e, r = /([^&;=]+)=?([^&;]*)/g,
            q = window.location.hash.substring(1);
        while ( e = r.exec(q)) {
            hashParams[e[1]] = decodeURIComponent(e[2]);
        }
        return hashParams;
      }
    </script>
  </body>
</html>